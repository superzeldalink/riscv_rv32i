.data
ARRAY_SIZE:
        .word   2
rand_state:
        .word   0
        
.text
main:
        addi    sp,sp,-48
        sw      ra,44(sp)
        sw      s0,40(sp)
        sw      s1,36(sp)
        addi    s0,sp,48
        li      a5,268435456
        sw      a5,-28(s0)
        sw      zero,-20(s0)
        j       .L2
.L3:
        call    rand
        mv      a4,a0
        lw      a5,-20(s0)
        slli    a5,a5,2
        lw      a3,-28(s0)
        add     a3,a3,a5
        srai    a5,a4,31
        srli    a5,a5,24
        add     a4,a4,a5
        andi    a4,a4,255
        sub     a5,a4,a5
        sw      a5,0(a3)
        lw      a5,-20(s0)
        addi    a5,a5,1
        sw      a5,-20(s0)
.L2:
        la     a5,ARRAY_SIZE
        lw      a5,0(a5)
        lw      a4,-20(s0)
        blt     a4,a5,.L3
        sw      zero,-24(s0)
        j       .L4
.L5:
        lw      a5,-24(s0)
        slli    a5,a5,2
        lw      a4,-28(s0)
        add     a5,a4,a5
        lw      a5,0(a5)
        sw      a5,-36(s0)
        call    rand
        mv      a4,a0
        srai    a5,a4,31
        srli    a5,a5,29
        add     a4,a4,a5
        andi    a4,a4,7
        sub     a5,a4,a5
        sw      a5,-40(s0)
        lw      a5,-24(s0)
        slli    a5,a5,2
        lw      a4,-28(s0)
        add     s1,a4,a5
        lw      a1,-40(s0)
        lw      a0,-36(s0)
        call    multiply
        mv      a5,a0
        sw      a5,0(s1)
        lw      a5,-24(s0)
        addi    a5,a5,1
        sw      a5,-24(s0)
.L4:
        la     a5,ARRAY_SIZE
        lw      a5,0(a5)
        lw      a4,-24(s0)
        blt     a4,a5,.L5
        li      a5,4096
        addi    a5,a5,-1920
        sw      a5,-32(s0)
        lw      a5,-32(s0)
        li      a4,1
        sw      a4,0(a5)
.L6:
        j       .L6
rand:
        addi    sp,sp,-16
        sw      ra,12(sp)
        sw      s0,8(sp)
        addi    s0,sp,16
        la     a5,rand_state
        lw      a4,0(a5)
        li      a5,1103515648
        addi    a5,a5,-403
        mul     a4,a4,a5
        li      a5,12288
        addi    a5,a5,57
        add     a4,a4,a5
        li      a5,-2147483648
        addi    a5,a5,-1
        and     a4,a4,a5
        la     a5,rand_state
        sw      a4,0(a5)
        la     a5,rand_state
        lw      a5,0(a5)
        mv      a0,a5
        lw      ra,12(sp)
        lw      s0,8(sp)
        addi    sp,sp,16
        jr      ra
multiply:
        addi    sp,sp,-48
        sw      ra,44(sp)
        sw      s0,40(sp)
        addi    s0,sp,48
        sw      a0,-36(s0)
        sw      a1,-40(s0)
        sw      zero,-20(s0)
        sw      zero,-24(s0)
        j       .L10
.L11:
        lw      a4,-20(s0)
        lw      a5,-36(s0)
        add     a5,a4,a5
        sw      a5,-20(s0)
        lw      a5,-24(s0)
        addi    a5,a5,1
        sw      a5,-24(s0)
.L10:
        lw      a4,-24(s0)
        lw      a5,-40(s0)
        blt     a4,a5,.L11
        lw      a5,-20(s0)
        mv      a0,a5
        lw      ra,44(sp)
        lw      s0,40(sp)
        addi    sp,sp,48
        jr      ra
merge:
        addi    sp,sp,-96
        sw      ra,92(sp)
        sw      s0,88(sp)
        sw      s2,84(sp)
        sw      s3,80(sp)
        sw      s4,76(sp)
        sw      s5,72(sp)
        sw      s6,68(sp)
        sw      s7,64(sp)
        addi    s0,sp,96
        sw      a0,-84(s0)
        sw      a1,-88(s0)
        sw      a2,-92(s0)
        sw      a3,-96(s0)
        mv      a3,sp
        mv      a1,a3
        lw      a2,-92(s0)
        lw      a3,-88(s0)
        sub     a3,a2,a3
        addi    a3,a3,1
        sw      a3,-48(s0)
        lw      a2,-96(s0)
        lw      a3,-92(s0)
        sub     a3,a2,a3
        sw      a3,-52(s0)
        lw      a3,-48(s0)
        addi    a2,a3,-1
        sw      a2,-56(s0)
        mv      a2,a3
        mv      s6,a2
        li      s7,0
        srli    a2,s6,27
        slli    t4,s7,5
        or      t4,a2,t4
        slli    t3,s6,5
        mv      a2,a3
        mv      s4,a2
        li      s5,0
        srli    a2,s4,27
        slli    t2,s5,5
        or      t2,a2,t2
        slli    t1,s4,5
        slli    a3,a3,2
        addi    a3,a3,15
        srli    a3,a3,4
        slli    a3,a3,4
        sub     sp,sp,a3
        mv      a3,sp
        addi    a3,a3,3
        srli    a3,a3,2
        slli    a3,a3,2
        sw      a3,-60(s0)
        lw      a3,-52(s0)
        addi    a2,a3,-1
        sw      a2,-64(s0)
        mv      a2,a3
        mv      s2,a2
        li      s3,0
        srli    a2,s2,27
        slli    a7,s3,5
        or      a7,a2,a7
        slli    a6,s2,5
        mv      a2,a3
        mv      t5,a2
        li      t6,0
        srli    a2,t5,27
        slli    a5,t6,5
        or      a5,a2,a5
        slli    a4,t5,5
        mv      a5,a3
        slli    a5,a5,2
        addi    a5,a5,15
        srli    a5,a5,4
        slli    a5,a5,4
        sub     sp,sp,a5
        mv      a5,sp
        addi    a5,a5,3
        srli    a5,a5,2
        slli    a5,a5,2
        sw      a5,-68(s0)
        sw      zero,-36(s0)
        j       .L14
.L15:
        lw      a4,-88(s0)
        lw      a5,-36(s0)
        add     a5,a4,a5
        slli    a5,a5,2
        lw      a4,-84(s0)
        add     a5,a4,a5
        lw      a4,0(a5)
        lw      a3,-60(s0)
        lw      a5,-36(s0)
        slli    a5,a5,2
        add     a5,a3,a5
        sw      a4,0(a5)
        lw      a5,-36(s0)
        addi    a5,a5,1
        sw      a5,-36(s0)
.L14:
        lw      a4,-36(s0)
        lw      a5,-48(s0)
        blt     a4,a5,.L15
        sw      zero,-40(s0)
        j       .L16
.L17:
        lw      a5,-92(s0)
        addi    a4,a5,1
        lw      a5,-40(s0)
        add     a5,a4,a5
        slli    a5,a5,2
        lw      a4,-84(s0)
        add     a5,a4,a5
        lw      a4,0(a5)
        lw      a3,-68(s0)
        lw      a5,-40(s0)
        slli    a5,a5,2
        add     a5,a3,a5
        sw      a4,0(a5)
        lw      a5,-40(s0)
        addi    a5,a5,1
        sw      a5,-40(s0)
.L16:
        lw      a4,-40(s0)
        lw      a5,-52(s0)
        blt     a4,a5,.L17
        sw      zero,-36(s0)
        sw      zero,-40(s0)
        lw      a5,-88(s0)
        sw      a5,-44(s0)
        j       .L18
.L22:
        lw      a4,-60(s0)
        lw      a5,-36(s0)
        slli    a5,a5,2
        add     a5,a4,a5
        lw      a4,0(a5)
        lw      a3,-68(s0)
        lw      a5,-40(s0)
        slli    a5,a5,2
        add     a5,a3,a5
        lw      a5,0(a5)
        bgt     a4,a5,.L19
        lw      a5,-44(s0)
        slli    a5,a5,2
        lw      a4,-84(s0)
        add     a5,a4,a5
        lw      a3,-60(s0)
        lw      a4,-36(s0)
        slli    a4,a4,2
        add     a4,a3,a4
        lw      a4,0(a4)
        sw      a4,0(a5)
        lw      a5,-36(s0)
        addi    a5,a5,1
        sw      a5,-36(s0)
        j       .L20
.L19:
        lw      a5,-44(s0)
        slli    a5,a5,2
        lw      a4,-84(s0)
        add     a5,a4,a5
        lw      a3,-68(s0)
        lw      a4,-40(s0)
        slli    a4,a4,2
        add     a4,a3,a4
        lw      a4,0(a4)
        sw      a4,0(a5)
        lw      a5,-40(s0)
        addi    a5,a5,1
        sw      a5,-40(s0)
.L20:
        lw      a5,-44(s0)
        addi    a5,a5,1
        sw      a5,-44(s0)
.L18:
        lw      a4,-36(s0)
        lw      a5,-48(s0)
        bge     a4,a5,.L23
        lw      a4,-40(s0)
        lw      a5,-52(s0)
        blt     a4,a5,.L22
        j       .L23
.L24:
        lw      a5,-44(s0)
        slli    a5,a5,2
        lw      a4,-84(s0)
        add     a5,a4,a5
        lw      a3,-60(s0)
        lw      a4,-36(s0)
        slli    a4,a4,2
        add     a4,a3,a4
        lw      a4,0(a4)
        sw      a4,0(a5)
        lw      a5,-36(s0)
        addi    a5,a5,1
        sw      a5,-36(s0)
        lw      a5,-44(s0)
        addi    a5,a5,1
        sw      a5,-44(s0)
.L23:
        lw      a4,-36(s0)
        lw      a5,-48(s0)
        blt     a4,a5,.L24
        j       .L25
.L26:
        lw      a5,-44(s0)
        slli    a5,a5,2
        lw      a4,-84(s0)
        add     a5,a4,a5
        lw      a3,-68(s0)
        lw      a4,-40(s0)
        slli    a4,a4,2
        add     a4,a3,a4
        lw      a4,0(a4)
        sw      a4,0(a5)
        lw      a5,-40(s0)
        addi    a5,a5,1
        sw      a5,-40(s0)
        lw      a5,-44(s0)
        addi    a5,a5,1
        sw      a5,-44(s0)
.L25:
        lw      a4,-40(s0)
        lw      a5,-52(s0)
        blt     a4,a5,.L26
        mv      sp,a1
        nop
        addi    sp,s0,-96
        lw      ra,92(sp)
        lw      s0,88(sp)
        lw      s2,84(sp)
        lw      s3,80(sp)
        lw      s4,76(sp)
        lw      s5,72(sp)
        lw      s6,68(sp)
        lw      s7,64(sp)
        addi    sp,sp,96
        jr      ra
mergeSort:
        addi    sp,sp,-48
        sw      ra,44(sp)
        sw      s0,40(sp)
        addi    s0,sp,48
        sw      a0,-36(s0)
        sw      a1,-40(s0)
        sw      a2,-44(s0)
        lw      a4,-40(s0)
        lw      a5,-44(s0)
        bge     a4,a5,.L29
        lw      a4,-44(s0)
        lw      a5,-40(s0)
        sub     a5,a4,a5
        srli    a4,a5,31
        add     a5,a4,a5
        srai    a5,a5,1
        mv      a4,a5
        lw      a5,-40(s0)
        add     a5,a5,a4
        sw      a5,-20(s0)
        lw      a2,-20(s0)
        lw      a1,-40(s0)
        lw      a0,-36(s0)
        call    mergeSort
        lw      a5,-20(s0)
        addi    a5,a5,1
        lw      a2,-44(s0)
        mv      a1,a5
        lw      a0,-36(s0)
        call    mergeSort
        lw      a3,-44(s0)
        lw      a2,-20(s0)
        lw      a1,-40(s0)
        lw      a0,-36(s0)
        call    merge
.L29:
        nop
        lw      ra,44(sp)
        lw      s0,40(sp)
        addi    sp,sp,48
        jr      ra
        
        